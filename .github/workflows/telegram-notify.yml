name: Telegram Notification
on: [push]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Telegram Message
        run: |
          COMMIT_MSG="${{ github.event.head_commit.message }}"
          AUTHOR="${{ github.actor }}"
          REPO="${{ github.repository }}"
          URL="${{ github.event.head_commit.url }}"
          BRANCH="${{ github.ref_name }}"
          
          # Format the message (now includes the branch name)
          TEXT="ğŸš€ *New update in ${REPO}* on branch *${BRANCH}* by *${AUTHOR}*!%0A%0AğŸ“ Commit: ${COMMIT_MSG}%0AğŸ”— [View Changes](${URL})"
          
          # Send to Telegram's official API
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TG_BOT_TOKEN }}/sendMessage" \
            -d "chat_id=${{ secrets.TG_CHAT_ID }}" \
            -d "text=${TEXT}" \
            -d "parse_mode=Markdown" \
            -d "disable_web_page_preview=true"
